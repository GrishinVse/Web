<html>
    <head>
        <link rel="stylesheet" href="homework_3.css" type="text/css">
        <title>HW 30.09</title>
        <h2>Выполнил студент группы ПИ19-2 Гришин Всеволод</h2>
        <h1>Simple Order Feedback Form</h1>
    </head>
    <body>
        <script type="text/javascript" id="for_generator">
            function executeJS(event) {
                event.preventDefault();

                var gen_form = document.querySelector("form[name=generated_form]");

                var user_name = document.getElementsByName("name")[0].value;
                var user_email = document.getElementsByName("email")[0].value;
                var user_orderId = document.getElementsByName("order_id")[0].value;
                var user_deliveryDate = document.getElementsByName("delivery_date")[0].value;
                var user_deliveryRate = document.getElementsByName("delivery_rate")[0].value;
                var user_recommend = document.querySelector('input[name="switch"]:checked').value;

                var user_comment = document.getElementsByName("comment_area")[0].value;
                var result = "User Name: " + user_name + 
                             "\nUser Email: " + user_email +  
                             "\nUser Order ID: " + user_orderId + 
                             "\nDelivery Date: " + user_deliveryDate + 
                             "\nDelivery Rate: " + user_deliveryRate + 
                             "\nWould user recommend: " + user_recommend + 
                             "\nUser Comment: " + user_comment 
                //alert(result);

                gen_form.innerHTML = "<h2>Completed Form<h2><h3>" + 
                             "User Name: " + user_name + 
                             "<br>User Email: " + user_email +  
                             "<br>User Order ID: " + user_orderId + 
                             "<br>Delivery Date: " + user_deliveryDate + 
                             "<br>Delivery Rate: " + user_deliveryRate + 
                             "<br>Would user recommend: " + user_recommend + 
                             "<br>User Comment: " + user_comment + "</h3>"
            }
        </script>
        <script type="text/javascript" id="save_load">
            function fsave(){
                user_name = document.getElementsByName("name")[0].value;
                user_email = document.getElementsByName("email")[0].value;
                user_orderId = document.getElementsByName("order_id")[0].value;
                user_deliveryDate = document.getElementsByName("delivery_date")[0].value;
                user_deliveryRate = document.getElementsByName("delivery_rate")[0].value;
                user_recommend = document.querySelector('input[name="switch"]:checked').value;
                user_comment = document.getElementsByName("comment_area")[0].value;

                localStorage.setItem('user_name', user_name);
                localStorage.setItem('user_email', user_email);
                localStorage.setItem('user_orderId', user_orderId);
                localStorage.setItem('user_deliveryDate', user_deliveryDate);
                localStorage.setItem('user_deliveryRate', user_deliveryRate);
                localStorage.setItem('user_recommend', user_recommend);
                localStorage.setItem('user_comment', user_comment);
            }

            function fload(){
                user_name = localStorage.getItem('user_name');
                user_email = localStorage.getItem('user_email');
                user_orderId = localStorage.getItem('user_orderId');
                user_deliveryDate = localStorage.getItem('user_deliveryDate');
                user_deliveryRate = localStorage.getItem('user_deliveryRate');
                user_recommend = localStorage.getItem('user_recommend');
                user_comment = localStorage.getItem('user_comment');
                
                document.getElementsByName("name")[0].value = user_name;
                document.getElementsByName("email")[0].value = user_email;
                document.getElementsByName("order_id")[0].value = user_orderId;
                document.getElementsByName("delivery_date")[0].value = user_deliveryDate;
                document.getElementsByName("delivery_rate")[0].value = user_deliveryRate;
                document.querySelector('input[name="switch"]:checked').value = user_recommend;
                document.getElementsByName("comment_area")[0].value = user_comment;
            }
        </script>
        <script type="text/javascript" id="save_load">
            function fServerSave(){
                //user_name = document.getElementsByName("name")[0].value;
                //user_email = document.getElementsByName("email")[0].value;
                //user_orderId = document.getElementsByName("order_id")[0].value;
                //user_deliveryDate = document.getElementsByName("delivery_date")[0].value;
                //user_deliveryRate = document.getElementsByName("delivery_rate")[0].value;
                //user_recommend = document.querySelector('input[name="switch"]:checked').value;
                //user_comment = document.getElementsByName("comment_area")[0].value;

                sessionStorage.setItem('user_name', document.getElementsByName("name")[0].value);
                sessionStorage.setItem('user_email', document.getElementsByName("email")[0].value);
                sessionStorage.setItem('user_orderId', document.getElementsByName("order_id")[0].value);
                sessionStorage.setItem('user_deliveryDate', document.getElementsByName("delivery_date")[0].value);
                sessionStorage.setItem('user_deliveryRate', document.getElementsByName("delivery_rate")[0].value);
                sessionStorage.setItem('user_recommend', document.querySelector('input[name="switch"]:checked').value);
                sessionStorage.setItem('user_comment', document.getElementsByName("comment_area")[0].value);
            }

            function fServerLoad(){
                user_name = sessionStorage.getItem('user_name');
                user_email = sessionStorage.getItem('user_email');
                user_orderId = sessionStorage.getItem('user_orderId');
                user_deliveryDate = sessionStorage.getItem('user_deliveryDate');
                user_deliveryRate = sessionStorage.getItem('user_deliveryRate');
                user_recommend = sessionStorage.getItem('user_recommend');
                user_comment = sessionStorage.getItem('user_comment');
                
                document.getElementsByName("name")[0].value = user_name;
                document.getElementsByName("email")[0].value = user_email;
                document.getElementsByName("order_id")[0].value = user_orderId;
                document.getElementsByName("delivery_date")[0].value = user_deliveryDate;
                document.getElementsByName("delivery_rate")[0].value = user_deliveryRate;
                document.querySelector('input[name="switch"]:checked').value = user_recommend;
                document.getElementsByName("comment_area")[0].value = user_comment;
            }
        </script>
        <meta charset="UTF-8">
        <h3>Enter details of your order in this form</h3>
        <form name="main_form" onsubmit="executeJS(event)">
            <div class="row">
                <div class="column">
                    <p>Your Name: <input type="text" name="name" placeholder="Enter your name" required></p>
                    <p>Email: <input type="email" name="email" placeholder="Enter your email" required></p>
                </div>
                <div class="column">
                    <p>Order ID: <input type="number" name="order_id" placeholder="Enter ID" min="1" max="999999" required></p>
                    <p>Order Delivery Date: <input type="date" name="delivery_date" required></p>
                </div>
                <div class="column">
                    <!--Выпадающее меню-->
                    <p>Rate your Delivery 
                        <select name="delivery_rate">
                        <option value="1">Very bad</option> 
                        <option value="2">Bad</option>
                        <option value="3">Normal</option>
                        <option value="4">Good</option>
                        <option value="5" selected>Excellent</option>
                        </select>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="column">
                    <!--Переключатели-->
                    <p>Would you recommend our shop to your friends/relatives?</p>
                        <div>
                            <p><input type="radio" name="switch" value="yes" checked>Yes! &#128513;</p>
                        </div>
                        <div>
                            <p><input type="radio" name="switch" value="no">No &#128555;</p>
                        </div>
                    
                </div>
                <div class="column">
                    <p>&#8681; Write your wishes here &#8681;</p>
                    <textarea name="comment_area" cols="40" rows=3" placeholder="Area for your complaints and suggestions"></textarea>
                </div>
                <div class="column" id="save_load">
                    <h3>Save results</h3>
                    <p>Using Local Storage
                        <input type="button" value="Save Info" onclick="fsave()">
                        <input type="button" value="Load Info" onclick="fload()">
                    </p>
                    <p>Using Server
                        <input type="button" value="Save Info" onclick="fServerSave()">
                        <input type="button" value="Load Info" onclick="fServerLoad()">
                    </p>
                </div>                
            </div>

            <p><input type="submit" value="Send Form"></p>
        </form>
        <form name="generated_form"></form>
    </body>
</html>